{% extends 'base.html.twig' %}

{% block title %}Statistique{% endblock %}

{% block stylesheets %}
{% endblock %}

{% block body %}
    <section class="container">
        <h1>Statistiques</h1>
        <canvas id="categories-sommes" width="400" height="400"></canvas>
        <canvas id="categories-number" width="400" height="400"></canvas>
    </section>
    {{ dump() }}
{% endblock %}

{% block javascripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js" integrity="sha512-sW/w8s4RWTdFFSduOTGtk4isV1+190E/GghVffMA9XczdJ2MDzSzLEubKAs5h0wzgSJOQTRYyaz73L3d6RtJSg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        let categories = document.querySelector("#categories-sommes");
        let categGraph = new Chart(categories, {
            type: "pie",
            data: {
                labels: {{ catNom|raw }},
                datasets: [{
                    label: "Répartition des catégories",
                    data: {{ catPrice }},
                    backgroundColor: {{ catColor|raw }}
                }]
            },
            options: {
                plugins: {
                    title: {
                        display: true,
                        text: 'La montant total dépensée par catégories'
                    },
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        })
        let categoriesNumb = document.querySelector("#categories-number");
        let categGraphNum = new Chart(categoriesNumb, {
            type: "pie",
            data: {
                labels: {{ catNom|raw }},
                datasets: [{
                    label: "Répartition des catégories",
                    data: {{ catCount }},
                    backgroundColor: {{ catColor|raw }}
                }]
            },
            options: {
                plugins: {
                    title: {
                        display: true,
                        text: 'Le nombre de produits par catégorie'
                    },
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        })
    </script>
{% endblock %}
